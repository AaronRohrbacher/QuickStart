<% if current_user.admin === true %>
  <div class = "row">
    <div class = "col-md-4">
      <div class="card">
        <div class="card-header">
          Companies
        </div>
        <div class="card-body">
          <% if current_user.companies.length == 0 %>
            <p class="card-text">You don't have any companies yet! You cannot create invoices until you've added at least one company.</p>
          <% else %>
            <p class="card-text">Click on a company to edit it:</p>
            <% @companies.each do |company| %>
              <p><%= link_to "#{company.name}", edit_company_path(company) %></p>
            <% end %>
          <% end %>
          <%= paginate @companies, param_name: 'company_page' %>
          <%= link_to 'New Company', new_company_path, class: "btn btn-primary" %>
        </div>
      </div>
    </div>
    <div class = "col-md-4">
      <div class="card">
        <div class="card-header">
          Invoices
        </div>
        <div class="card-body">
          <% if current_user.invoices.length == 0 %>
            <p class="card-text">You have no invoices.</p>
          <% else %>
            <p class="card-text">Click on an invoice to view it:</p>
          <% @invoices.each do |invoice| %>
            <p><%= link_to "#{invoice.id} #{invoice.company.name}", invoice_path(invoice) %></p>
          <% end %>
          <% end %>
          <%= paginate @invoices, param_name: 'invoice_page' %>
          <%= link_to 'New Invoice', new_invoice_path, class: "btn btn-primary" %>
        </div>
      </div>
    </div>
    <div class = "col-md-4">
      <div class="card">
        <div class="card-header">
          Unpaid Invoices
        </div>
        <div class="card-body">
          <% if @unpaid_invoices.length == 0 %>
            <p class="card-text">You have no unpaid invoices.</p>
          <% else %>
            <p class="card-text">Click on an invoice to view it:</p>
            <% @unpaid_invoices.each do |invoice| %>
              <p><%= link_to "#{invoice.company.name}", invoice_path(invoice) %></p>
            <% end %>
          <% end %>
          <%= paginate @unpaid_invoices, param_name: 'unpaid_invoice_page' %>
        </div>
      </div>
    </div>
  </div>
  <div class = "row">
    <div class = "col-md-4">
      <div class="card">
        <div class="card-header">
          Overdue Invoices
        </div>
        <div class="card-body">
          <% if @overdue_invoices.length == 0 %>
            <p class="card-text">You have no overdue invoices.</p>
          <% else %>
            <p class="card-text">Click on an invoice to view it:</p>
            <% @overdue_invoices.each do |invoice| %>
              <p><%= link_to "#{invoice.company.name}", invoice_path(invoice) %></p>
            <% end %>
          <% end %>
          <%= paginate @overdue_invoices, param_name: 'overdue_invoice_page' %>
        </div>
      </div>
    </div>
  </div>
<% else %>
  <table class = "table">
    <th>Project Number</th>
    <th>Project Name</th>
    <th>Status</th>
    <% if Dashboard.any_payable?(current_user.companies[0]) %>
      <th>Total Due</th>
      <th>Pay Invoice</th>
    <% end %>
    <% if Dashboard.any_showable?(current_user.companies[0]) %>
      <th>View Project</th>
    <% end %>
    <% @invoices.each do |invoice| %>
      <tr>
        <td><%= invoice.invoice_number %></td>
        <td><%= invoice.name %></td>
        <td><p class="invoiceStatus" style="color: <%= invoice.status.color %>"><%= invoice.status.name %></p></td>
        <% if invoice.payable? %>
          <td><%= number_to_currency(invoice.total) %></td>
          <td><a href="https://www.paypal.me/aaronrohrbacher/<%= invoice.total %>"><h3 class = "btn btn-success">Pay Online Now</h3></a></td>
        <% elsif Dashboard.any_payable?(current_user.companies[0]) %>
          <td></td><td></td>
        <% end %>
        <% if invoice.showable? %>
          <td><%= link_to "View Project", invoice_path(invoice), class: "btn btn-primary" %></td>
        <% elsif Dashboard.any_showable?(current_user.companies[0]) %>
          <td></td>
        <% end %>
      </tr>
    <% end %>
  </table>
<% end %>